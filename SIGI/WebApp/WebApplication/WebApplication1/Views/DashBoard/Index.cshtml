
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    #chartdiv {
        width: 100%;
        height: 500px;
    }
</style>

<script>
    //$(document).ready(function () {
    //    $('#gridPaises').dataTable({
    //        language: {
    //            aria: {
    //                sortAscending: ": activate to sort column ascending",
    //                sortDescending: ": activate to sort column descending"
    //            },
    //            emptyTable: "No data available in table",
    //            info: "Showing _START_ to _END_ of _TOTAL_ entries",
    //            infoEmpty: "No entries found",
    //            infoFiltered: "(filtered1 from _MAX_ total entries)",
    //            lengthMenu: "_MENU_ entries",
    //            search: "Search:",
    //            zeroRecords: "No matching records found"
    //        },
    //        fixedHeader: {
    //            header: !0
    //        },
    //        order: [
    //            [0, "asc"]
    //        ],
    //        lengthMenu: [
    //            [5, 10, 15, 20, -1],
    //            [5, 10, 15, 20, "All"]
    //        ],
    //        pageLength: 20
    //    })
    //}
    //);


    $(function () {

        $.ajax({
            url: '/DashBoard/Refresh',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            //data: JSON.stringify({ idEstado: idLinha }),
            success: function (resultado) {
                if (true) {
                    console.log(resultado);
                }
                var container = $("#semana");

                debugger;
                var valorPrincipal = $("#semana-valorprincipal");
                valorPrincipal.attr('data-value', resultado.EstaSemana.Percentual);
                valorPrincipal.text(resultado.EstaSemana.Percentual);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                
            }
        });
    });

        $.ajax({
            url: "/DashBoard/Refresh",
            context: document.body,
            data: "{empid: empid}",
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        }).success(function (e) {
            console.log("funcionou" + e);

            var container = $("#semana");

            debugger;
            var valorPrincipal = $("#semana-valorprincipal");
            valorPrincipal.attr('data-value', e.EstaSemana);
            valorPrincipal.val(e.EstaSemana);

        });
    //$(document).ready(function () {
        @*//debugger;
        var chart = AmCharts.makeChart("chartdiv", {
            "type": "pie",
            "theme": "light",
            "dataProvider": e.ListaPercentualFuncionarios,
            "valueField": "Percentual",
            "titleField": "NomeFuncionario",
            "balloon": {
                "fixedPosition": true
            },
            "export": {
                "enabled": true
            }
        });

        var path =@Url.Action("Refresh", "DashBoard");
        console.log(path)
        $.ajax({
            url:"/DashBoard/Refresh",
            context: document.body
        }).success(function (e) {
            var chart = AmCharts.makeChart("chartdiv", {
            debugger;
                "type": "pie",
                "theme": "light",
                "dataProvider": e.,
                "valueField": "Percentual",
                "titleField": "NomeFuncionario",
                "balloon": {
                    "fixedPosition": true
                },
                "export": {
                    "enabled": true
                }
            });

        });*@

    //});

</script>
<div class="row">

    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
        <div class="dashboard-stat2" id="semana">
            <div class="display">
                <div class="number">
                    <h3 class="font-green-sharp">
                        <span data-counter="counterup" id="semana-valorprincipal" data-value="0">0</span>
                        <small class="font-green-sharp">%</small>
                    </h3>
                    <small>Atendimentos Convertido</small>
                </div>
                <div class="icon">
                    <i class="icon-pie-chart"></i>
                </div>
            </div>
            <div class="progress-info">
                <div class="progress">
                    <span style="width: 0%;" class="progress-bar progress-bar-success green-sharp">
                        <span class="sr-only">0% progress</span>
                    </span>
                </div>
                <div class="status">
                    <div class="status-title">Atendimentos convertidos nesta semana</div>
                    <div class="status-number">0% </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
        <div class="dashboard-stat2 ">
            <div class="display">
                <div class="number">
                    <h3 class="font-green-sharp">
                        <span data-counter="counterup" data-value="0">0</span>
                        <small class="font-green-sharp">%</small>
                    </h3>
                    <small>Atendimentos Convertido</small>
                </div>
                <div class="icon">
                    <i class="icon-pie-chart"></i>
                </div>
            </div>
            <div class="progress-info">
                <div class="progress">
                    <span style="width: 0%;" class="progress-bar progress-bar-success green-sharp">
                        <span class="sr-only">0% progress</span>
                    </span>
                </div>
                <div class="status">
                    <div class="status-title">Atendimentos convertidos neste mês</div>
                    <div class="status-number">0% </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
        <div class="dashboard-stat2 ">
            <div class="display">
                <div class="number">
                    <h3 class="font-green-sharp">
                        <span data-counter="counterup" data-value="0">0</span>
                        <small class="font-green-sharp">%</small>
                    </h3>
                    <small>Atendimentos Convertido</small>
                </div>
                <div class="icon">
                    <i class="icon-pie-chart"></i>
                </div>
            </div>
            <div class="progress-info">
                <div class="progress">
                    <span style="width: 0%;" class="progress-bar progress-bar-success green-sharp">
                        <span class="sr-only">0% progress</span>
                    </span>
                </div>
                <div class="status">
                    <div class="status-title">Atendimentos convertidos dos últimos 12 meses</div>
                    <div class="status-number">0% </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="chartdiv"></div>
